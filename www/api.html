<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
	<TITLE>C API: GraphicsMagick - Image Processing and Display Package</TITLE>
	<META NAME="GENERATOR" CONTENT="StarOffice 8  (Solaris x86)">
	<META NAME="CREATED" CONTENT="20030425;16380900">
	<META NAME="CHANGEDBY" CONTENT="Bob Friesenhahn">
	<META NAME="CHANGED" CONTENT="20080511;21250500">
	<META NAME="DESCRIPTION" CONTENT="GraphicsMagick is a    robust collection of tools and libraries to read, write, and manipulate    an image in any of the more popular image formats including GIF, JPEG,    PNG, PDF, and Photo CD.  With GraphicsMagick you can create GIFs dynamically    making it suitable for Web applications.  You can also resize, rotate,    sharpen, color reduce, or add special effects to an image and save your    completed work in the same or  differing image format.">
	<META NAME="KEYWORDS" CONTENT="GraphicsMagick, Image Magick, Image Magic,    PerlMagick, Perl Magick, Perl Magic, CineMagick, PixelMagick, Pixel Magic,    WebMagick, Web Magic, visualization, image processing, software     development, simulation, image, software, AniMagick, Animagic,    Magick++">
	<META NAME="CHANGEDBY" CONTENT="Bob Friesenhahn">
	<STYLE TYPE="text/css">
	<!--
		P { color: #000000; font-family: "Verdana", "Arial", "Helvetica", sans-serif; font-size: 12pt }
		DD { color: #000000; font-family: "Verdana", "Arial", "Helvetica", sans-serif; font-size: 12pt }
		PRE { color: #000000 }
		A:link { color: #0085c0 }
		A:visited { color: #800080 }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" TEXT="#000000" LINK="#0085c0" VLINK="#800080" BGCOLOR="#ffffff" DIR="LTR">
<P><FONT FACE="Verdana, Arial, Helvetica, sans-serif"><I>GraphicsMagick</I></FONT><FONT FACE="Verdana, Arial, Helvetica, sans-serif">
has a number of functions that allow you to read, manipulate, write,
or display an image. These functions are accessible through the
various <A HREF="programming.html">tools</A> or the object-oriented
Perl interface, <A HREF="perl.html">PerlMagick</A>. However, you can
also access the functions directly from your program through the
Magick Application Programmer Interface. To invoke the functions,
write your program in your favorite language while making calls to
the Magick image functions and link with </FONT><TT><FONT FACE="Verdana, Arial, Helvetica, sans-serif">libGraphicsMagick.a</FONT></TT><FONT FACE="Verdana, Arial, Helvetica, sans-serif">,
</FONT><TT><FONT FACE="Verdana, Arial, Helvetica, sans-serif">libGraphicsMagick.so</FONT></TT><FONT FACE="Verdana, Arial, Helvetica, sans-serif">,
or </FONT><TT><FONT FACE="Verdana, Arial, Helvetica, sans-serif">Magick.dll</FONT></TT><FONT FACE="Verdana, Arial, Helvetica, sans-serif">
depending on your system. </FONT>
</P>
<P STYLE="margin-bottom: 0.1in"><FONT FACE="Verdana, Arial, Helvetica, sans-serif"><FONT SIZE=3>The
API is divided into a number of categories: </FONT></FONT>
</P>
<UL>
	<LI><DD><FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/constitute.html">GraphicsMagick
	Methods to Constitute an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/composite.html">GraphicsMagick
	Methods to Composite an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/image.html">GraphicsMagick
	Image Methods</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/channel.html">GraphicsMagick
	Image Channel Methods</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/color.html">Methods
	to Count the Colors in an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/quantize.html">Methods
	to Reduce the Number of Unique Colors in an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/segment.html">Methods
	to Segment an Image with Thresholding Fuzzy c-Means</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/resize.html">Methods
	to Resize an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/transform.html">Methods
	to Transform an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/shear.html">Methods
	to Shear or Rotate an Image by an Arbitrary Angle</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/enhance.html">Methods
	to Enhance an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/effect.html">GraphicsMagick
	Image Effects Methods</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/fx.html">GraphicsMagick
	Special Effects Methods</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/decorate.html">GraphicsMagick
	Image Decoration Methods</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/attribute.html">Image
	Text Attributes Methods</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/annotate.html">Methods
	to Annotate an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/paint.html">Methods
	to Paint on an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/render.html">Methods
	to Draw on an Image</A> </FONT>
	</DD><LI><DD>
	<A HREF="api/draw.html"><FONT FACE="Verdana, Arial, Helvetica, sans-serif">Image
	Vector Drawing Methods </FONT></A>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/montage.html">GraphicsMagick
	Methods to Create Image Thumbnails</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/display.html">Methods
	to Interactively Display and Edit an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/animate.html">Methods
	to Interactively Animate an Image Sequence</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/pixel_cache.html">Methods
	to Get or Set Image Pixels</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/pixel_iterator.html">Methods
	to support operations on a region of pixels (callback per pixel)</A></FONT></DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/pixel_row_iterator.html">Methods
	to support operations on  a region of pixels (callback per row)</A></FONT></DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/list.html">Working
	with Image Lists</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/blob.html">Methods
	to Read or Write Binary Large OBjects</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/magick.html">Methods
	to Read or List GraphicsMagick Image formats</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/signature.html">Methods
	to Compute a Message Digest for an Image</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/registry.html">GraphicsMagick
	Registry Methods</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/error.html">GraphicsMagick
	Error Methods</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/memory.html">GraphicsMagick
	Memory Allocation Methods</A> </FONT>
	</DD><LI><DD>
	<A HREF="api/operator.html"><FONT FACE="Verdana, Arial, Helvetica, sans-serif">Methods
	to apply mathematic or boolean operators to pixels</FONT></A></DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/resource.html">GraphicsMagick
	Resource Consumption Methods</A> </FONT>
	</DD><LI><DD>
	<FONT FACE="Verdana, Arial, Helvetica, sans-serif"><A HREF="api/monitor.html">GraphicsMagick
	Progress Monitor Methods</A> </FONT>
	</DD></UL>
<P><FONT FACE="Verdana, Arial, Helvetica, sans-serif"><FONT SIZE=3>Here
is a sample program to get you started. To find out about all the
functions that are available, read the source code. Each function is
delineated with a full rows of percent signs with comments describing
the parameters required for the function and what it does. For ease
in finding a function, they are sorted in alphabetical order.</FONT></FONT></P>
<P><FONT FACE="Verdana, Arial, Helvetica, sans-serif">Here is a full
example of a program, </FONT><TT><FONT FACE="Verdana, Arial, Helvetica, sans-serif">demo.c</FONT></TT><FONT FACE="Verdana, Arial, Helvetica, sans-serif">,
which reads multiple input files (possibly animation files) specified
on the command line, resizes the image frames to 106x80, and writes
the resulting animation to disk.</FONT></P>
<PRE>#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;time.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;magick/api.h&gt;

int main(int argc,char **argv)
{
  ExceptionInfo
    exception;

  Image
    *image,
    *images,
    *resize_image,
    *thumbnails;

  ImageInfo
    *image_info;

  int
    i;

  /*
    Initialize the image info structure and read the list of files
    provided by the user as a image sequence
  */
  InitializeMagick(*argv);
  GetExceptionInfo(&amp;exception);
  image_info=CloneImageInfo((ImageInfo *) NULL);
  images=NewImageList();
  for (i=1; i&lt; argc-1; i++)
    {
      (void) strcpy(image_info-&gt;filename,argv[i]);
      printf(&quot;Reading %s ...&quot;, image_info-&gt;filename);
      image=ReadImage(image_info,&amp;exception);
      printf(&quot; %lu frames\n&quot;, GetImageListLength(image));
      if (exception.severity != UndefinedException)
        CatchException(&amp;exception);
      if (image)
        (void) AppendImageToList(&amp;images,image);
    }

  if (!images)
    {
      printf(&quot;Failed to read any images!\n&quot;);
      exit(1);
    }
  /*
    Create a thumbnail image sequence
  */
  thumbnails=NewImageList();
  while ((image=RemoveFirstImageFromList(&amp;images)) != (Image *) NULL)
    {
      resize_image=ResizeImage(image,106,80,LanczosFilter,1.0,&amp;exception);
      DestroyImage(image);
      if (resize_image == (Image *) NULL)
        {
          CatchException(&amp;exception);
          continue;
        }
      (void) AppendImageToList(&amp;thumbnails,resize_image);
    }
  /*
    Write the thumbnail image sequence to file
  */
  if (thumbnails)
    {
      (void) strcpy(thumbnails-&gt;filename,argv[argc-1]);
      printf(&quot;Writing %s ... %lu frames\n&quot;, thumbnails-&gt;filename,
             GetImageListLength(thumbnails));
      WriteImage(image_info,thumbnails);
    }

  /*
    Release resources
  */
  DestroyImageList(thumbnails);
  DestroyImageInfo(image_info);
  DestroyExceptionInfo(&amp;exception);
  DestroyMagick();
  return(0);
}</PRE><P>
Now we need to compile. On Unix, the command would look something
like this: 
</P>
<PRE STYLE="margin-bottom: 0.2in">   gcc -o demo demo.c -O `GraphicsMagick-config --cppflags --ldflags --libs`</PRE><P>
As a usage example, with the input files in1.gif, in2.png, and
in3.jpg, create the animation file out.miff:</P>
<PRE STYLE="margin-bottom: 0.2in">   demo in1.gif in2.png in3.jpg out.miff</PRE><P>
The resulting animation may be played on an X11 display using '<FONT FACE="Cumberland">gm
animate out.miff</FONT>'.</P>
<P>The GraphicsMagick-config script reproduces the options which were
used to compile the GraphicsMagick utilities. Using compatible
options ensures that your program will compile and run.</P>
<P><FONT FACE="Albany">Another example is <A HREF="smile.c">smile.c</A>.
Compile and execute it to display a smiley face on your X server. </FONT>
</P>
<HR>
<P ALIGN=CENTER><FONT FACE="Albany"><A HREF="Copyright.html">Copyright</A>
</FONT><FONT FACE="Abadi Mt Condensed Extra Bold">&copy;</FONT><FONT FACE="Albany">
GraphicsMagick Group 2002, 2003, 2004, 2008</FONT></P>
</BODY>
</HTML>